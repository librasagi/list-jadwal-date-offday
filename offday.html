<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Jadwal Offday Edbert dan Felina</title>
<style>
  body { font-family: 'Segoe UI', Arial, sans-serif; background: linear-gradient(135deg, #ffe6eb, #fff5e6); padding: 20px; min-height: 100vh; position: relative; overflow-x: hidden; transition: background 3s ease; }
  h1 { color: #c0392b; text-align: center; margin-bottom: 10px; text-shadow: 1px 1px 5px rgba(0,0,0,0.2); }
  .subtitle { text-align: center; color: #7f8c8d; margin-bottom: 20px; font-style: italic; font-size: 18px; }
  table { width: 100%; border-collapse: collapse; margin-top: 20px; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 10px 25px rgba(0,0,0,0.08); transition: transform 0.3s; }
  th, td { padding: 12px; text-align: center; transition: background 0.3s, transform 0.3s; }
  th { background: #e74c3c; color: white; }
  tr:nth-child(even) td { background: #fff7f8; }
  td.editable { cursor: pointer; }
  .controls { text-align: center; margin-top: 15px; }
  button { margin: 6px; padding: 10px 16px; background: #e74c3c; color: white; border: none; border-radius: 20px; font-size: 14px; cursor: pointer; transition: 0.3s; }
  button:hover { background: #c0392b; transform: scale(1.05); }
  button.secondary { background: #95a5a6; }
  button.secondary:hover { background: #7f8c8d; transform: scale(1.05); }
  .heart, .confetti { position: absolute; font-size: 24px; animation: floatUp 2s linear forwards; pointer-events: none; }
  @keyframes floatUp { 0% {opacity:1; transform: translateY(0) rotate(0deg);} 100% {opacity:0; transform: translateY(-100px) rotate(360deg);}} 
</style>
</head>
<body>

<h1>Jadwal Offday Edbert dan Felina</h1>
<p class="subtitle" id="romantic-text"></p>

<div class="controls">
  <button onclick="loginOwner()">üîê Login Owner</button>
  <button class="secondary" onclick="logoutOwner()">üö™ Logout</button>
  <button onclick="addRow()">‚ûï Tambah Jadwal</button>
</div>

<table id="jadwal"></table>

<script>
const ownerPassword = "270623";
let isOwner = false;

let data = JSON.parse(localStorage.getItem("jadwalOffday")) || [
  {no:1, tgl:"2025-12-20", hari:"Sabtu", jam:"18:00", cat:"Nonton bareng"},
  {no:2, tgl:"2025-12-25", hari:"Rabu", jam:"20:00", cat:"Dinner romantis"}
];

const romanticPhrases = [
  "Waktu bareng kamu selalu terasa kurang ‚ù§Ô∏è",
  "Setiap detik bersamamu berharga üíï",
  "Hari ini sempurna untuk quality time ü•∞",
  "Aku selalu menantikan momen ini bersamamu üíå",
  "Cinta kita selalu bikin senyum üòò"
];

function showRomanticText() {
  const idx = Math.floor(Math.random() * romanticPhrases.length);
  document.getElementById('romantic-text').innerText = romanticPhrases[idx];
}

function saveData() { localStorage.setItem("jadwalOffday", JSON.stringify(data)); }

function loginOwner() {
  let pw = prompt("Masukkan password owner:");
  if (pw === ownerPassword) { isOwner = true; alert("Mode edit aktif ‚úÖ"); spawnEffect(); }
  else alert("Password salah ‚ùå");
}

function logoutOwner() { isOwner = false; alert("Logout berhasil"); }

function addRow() {
  if (!isOwner) return alert("Login dulu sebagai owner");
  let tgl = prompt("Tanggal (YYYY-MM-DD):");
  let hari = prompt("Hari:");
  let jam = prompt("Jam (HH:MM):");
  let cat = prompt("Catatan:");
  if (tgl && hari && jam && cat) { data.push({ no: data.length+1, tgl, hari, jam, cat }); saveData(); render(); spawnEffect(); }
}

function deleteRow(index) {
  if (!isOwner) return alert("Login dulu sebagai owner");
  if (confirm("Hapus jadwal ini?")) { data.splice(index,1); data.forEach((d,i)=>d.no=i+1); saveData(); render(); spawnEffect(); }
}

function spawnEffect() {
  // Heart
  const heart = document.createElement('div');
  heart.className = 'heart';
  heart.style.left = Math.random() * window.innerWidth + 'px';
  heart.innerText = '‚ù§Ô∏è';
  document.body.appendChild(heart);
  setTimeout(()=>heart.remove(), 2000);
  // Confetti
  for(let i=0;i<5;i++){
    const c = document.createElement('div');
    c.className='confetti';
    c.style.left=Math.random()*window.innerWidth+'px';
    c.style.color=['#ff5c5c','#ffb3b3','#ff8080','#ffc0cb'][Math.floor(Math.random()*4)];
    c.innerText='‚ú®';
    document.body.appendChild(c);
    setTimeout(()=>c.remove(),2000);
  }
}

function render() {
  const t = document.getElementById("jadwal");
  t.innerHTML = `<tr><th>No</th><th>Tanggal</th><th>Hari</th><th>Jam</th><th>Catatan</th><th>H-berapa</th><th>Aksi</th></tr>`;
  const today = new Date();
  data.forEach((d,i)=>{
    let r = t.insertRow();
    r.insertCell().innerText = d.no;
    r.insertCell().innerText = d.tgl;
    r.insertCell().innerText = d.hari;
    r.insertCell().innerText = d.jam;
    
    let c = r.insertCell(); c.innerText=d.cat; c.className="editable";
    c.onclick=()=>{ 
      if(!isOwner) return alert("Login dulu sebagai owner"); 
      let n=prompt("Ubah catatan:",d.cat); 
      if(n!==null){ d.cat=n; saveData(); render(); spawnEffect(); } 
    };

    let eventDate = new Date(d.tgl + 'T' + d.jam);
    let diffDays = Math.ceil((eventDate - today)/(1000*60*60*24));
    r.insertCell().innerText = diffDays >= 0 ? `H-${diffDays}` : "Lewat";

    let editBtn = document.createElement("button");
    editBtn.innerText="‚úèÔ∏è";
    editBtn.onclick=()=>{
      if(!isOwner) return alert("Login dulu sebagai owner");
      let newTgl=prompt("Ubah tanggal:",d.tgl);
      let newHari=prompt("Ubah hari:",d.hari);
      let newJam=prompt("Ubah jam:",d.jam);
      if(newTgl && newHari && newJam){ d.tgl=newTgl; d.hari=newHari; d.jam=newJam; saveData(); render(); spawnEffect(); }
    };

    let aksi=r.insertCell(); aksi.appendChild(editBtn);
    let del=document.createElement("button"); del.innerText="üóëÔ∏è"; del.onclick=()=>{ deleteRow(i); spawnEffect(); }; aksi.appendChild(del);
  });
  showRomanticText();
}

// Background gradient animasi
let gradientStep = 0;
setInterval(()=>{
  gradientStep += 0.002;
  document.body.style.background = `linear-gradient(${gradientStep*360}deg, #ffe6eb, #fff5e6)`;
},30);

render();
</script>

</body>
</html>
